<div class="span-3">
  <div class="choose-your-template">
    <h2>Choose your Grumpy Gram</h2>
    
    <% @gram_templates.each do |template| %>
      <%= render :partial => "/gram_templates/preview", :locals => { :gram_template => template } %>
    <% end %>
  </div>
</div>

<div class="span-6 last">
  <div class="grumpy-gram">
    <p>Preview of grumpy gram here!</p>
  </div>
  
  <% form_for @gram do |f| %>
    <%= f.error_message_on(:base) %>
    <%= f.hidden_field :gram_template_id %>
    
    <table class="send-gram">
      <tr class="name-email-row">
        <td><%= f.label :to_name, "Their name" %><%= f.text_field :to_name %><%= f.error_message_on :to_name %></td>
        <td class="right"><%= f.label :from_name, "Your name" %><%= f.text_field :from_name %><%= f.error_message_on :from_name %></td>
      </tr>
      <tr class="name-email-row">
        <td><%= f.label :to_email, "Their email" %><%= f.text_field :to_email %><%= f.error_message_on :to_email %></td>
        <td class="right"><%= f.label :from_email, "Your email " %><%= f.text_field :from_email %><%= f.error_message_on :from_email %></td>
      </tr>
      <tr>
        <td colspan="2">
          <%= f.label :message, "Your custom message <span>(optional)</span>" %>
          <br /><%= f.text_area :message %>
          <%= f.error_message_on :message %>
        </td>
      </tr>
      <tr>
        <td class="submit-column" colspan="2">
          <%= f.submit 'Send your grumpy gram!' %>
          <label>Let's make sure you're not a grumpy robot</label>
          <%= recaptcha_tags %>
        </td>
      </tr>
    </table>
  <% end %>
</div>